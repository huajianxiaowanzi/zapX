# zapX - Uber Zap æ—¥å¿—åº“å¢žå¼ºå°è£…

[![Go Report Card](https://goreportcard.com/badge/github.com/huajianxiaowanzi/zapX)](https://goreportcard.com/report/github.com/huajianxiaowanzi/zapX)
[![Go å‚è€ƒæ–‡æ¡£](https://pkg.go.dev/badge/github.com/huajianxiaowanzi/zapX.svg)](https://pkg.go.dev/github.com/huajianxiaowanzi/zapX)

zapX æ˜¯å¯¹ Uber Zap é«˜æ€§èƒ½æ—¥å¿—åº“çš„å¢žå¼ºå°è£…ï¼Œæä¾›æ›´å‹å¥½çš„ API æŽ¥å£å’Œå¼€ç®±å³ç”¨çš„æœ€ä½³å®žè·µé…ç½®ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ðŸŒˆ **å½©è‰²ç»ˆç«¯è¾“å‡º** - ä¸åŒæ—¥å¿—çº§åˆ«è‡ªåŠ¨ç€è‰²ï¼Œå…³é”®ä¿¡æ¯ä¸€ç›®äº†ç„¶
- ðŸ“… **æ™ºèƒ½æ—¥å¿—åˆ†å‰²** - æŒ‰æ—¥æœŸå’Œçº§åˆ«è‡ªåŠ¨åˆ†ç±»å­˜å‚¨ï¼Œæ—¥å¿—ç®¡ç†æ›´è½»æ¾
- ðŸš€ **æžç®€ API è®¾è®¡** - æ¯”åŽŸç”Ÿ Zap æ›´ç›´è§‚æ˜“ç”¨çš„æŽ¥å£è®¾è®¡
- ðŸ”§ **çµæ´»é…ç½®** - æ”¯æŒæŽ§åˆ¶å°/æ–‡ä»¶è¾“å‡ºã€æ—¥å¿—çº§åˆ«ç­‰å¤šç»´åº¦é…ç½®
- ðŸ” **ä¸Šä¸‹æ–‡è¿½è¸ª** - æ”¯æŒç»“æž„åŒ–æ—¥å¿—å­—æ®µï¼Œæ–¹ä¾¿é—®é¢˜æŽ’æŸ¥
- â± **æ ‡å‡†åŒ–æ—¶é—´** - ISO8601 æ ‡å‡†æ—¶é—´æ ¼å¼ï¼Œå…¼å®¹å„ç±»æ—¥å¿—åˆ†æžå·¥å…·

## å®‰è£…

```bash
go get github.com/huajianxiaowanzi/zapX/log@v0.1.0
```

## ðŸš€ å¿«é€Ÿå¼€å§‹
### 1. åŸºç¡€ä½¿ç”¨

```go
package main

import "github.com/huajianxiaowanzi/zapX/log"

func main() {
    // åˆå§‹åŒ–æ—¥å¿—ï¼ˆé»˜è®¤é…ç½®ï¼šæŽ§åˆ¶å°è¾“å‡º + Infoçº§åˆ«ï¼‰
    log.Init()
    
    // è®°å½•ä¸åŒçº§åˆ«æ—¥å¿—
    log.Debug("è°ƒè¯•ä¿¡æ¯")      // é»˜è®¤ä¸æ˜¾ç¤º
    log.Info("æœåŠ¡å¯åŠ¨æˆåŠŸ")   // ç»¿è‰²è¾“å‡º
    log.Warn("ç£ç›˜ç©ºé—´ä¸è¶³")   // é»„è‰²è¾“å‡º
    log.Error("è¿žæŽ¥å¤±è´¥")     // çº¢è‰²è¾“å‡º
    
    // æ ¼å¼åŒ–è¾“å‡º
    log.Infof("å½“å‰ç”¨æˆ·: %s", "å¼ ä¸‰")
    log.Errorf("é”™è¯¯ç : %d", 500)
}
```

### 2. æ·»åŠ ä¸Šä¸‹æ–‡
```go
// æ·»åŠ å•ä¸ªå­—æ®µ
log.With(zap.String("requestID", "req-123")).Info("æ”¶åˆ°è¯·æ±‚")

// æ·»åŠ å¤šä¸ªå­—æ®µ
log.With(
zap.String("userID", "u1001"),
zap.Int("loginAttempt", 3),
).Warn("ç”¨æˆ·ç™»å½•é¢‘ç¹å¤±è´¥")

// é”™è¯¯æ—¥å¿—ä¸“ç”¨
err := errors.New("connection timeout")
log.WithError(err).Error("æ•°æ®åº“æ“ä½œå¤±è´¥")
```

### 3. è‡ªå®šä¹‰é…ç½®
```go
func main() {
    // è‡ªå®šä¹‰é…ç½®
    cfg := log.LogConfig{
        ConsoleOutput: true,   // å¯ç”¨æŽ§åˆ¶å°è¾“å‡º, é»˜è®¤ä¸ºtrue
        FileOutput:    true,    // å¯ç”¨æ–‡ä»¶è¾“å‡º, é»˜è®¤ä¸ºfalse
        Level:         zapcore.DebugLevel, // è®¾ç½®æ—¥å¿—çº§åˆ«, é»˜è®¤ä¸ºzapcore.InfoLevel
    }
    
    log.Init(cfg)
    
    // è¿™äº›æ—¥å¿—ä¼šåŒæ—¶è¾“å‡ºåˆ°æŽ§åˆ¶å°å’Œæ–‡ä»¶
    log.Debug("è°ƒè¯•ä¿¡æ¯")  // çŽ°åœ¨ä¼šæ˜¾ç¤º
    log.Info("ç³»ç»ŸçŠ¶æ€æ­£å¸¸")
}
```

## ðŸ—„ï¸ æ—¥å¿—æ–‡ä»¶ç»“æž„
æ—¥å¿—æ–‡ä»¶æŒ‰æ—¥æœŸè‡ªåŠ¨ç»„ç»‡ï¼Œç¤ºä¾‹ç»“æž„ï¼š
```text
logs/
â”œâ”€â”€ 2023-10-01/
â”‚   â”œâ”€â”€ out.log    # æ™®é€šæ—¥å¿—(Info/Warn)
â”‚   â””â”€â”€ err.log    # é”™è¯¯æ—¥å¿—(Error+)
â”œâ”€â”€ 2023-10-02/
â”‚   â”œâ”€â”€ out.log
â”‚   â””â”€â”€ err.log
â””â”€â”€ current -> 2023-10-02  # å½“æ—¥æ—¥å¿—è½¯é“¾æŽ¥
```
